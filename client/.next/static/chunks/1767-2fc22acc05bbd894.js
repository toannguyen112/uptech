"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1767],{1767:function(a,b,c){c.d(b,{Z:function(){return H}});var d=c(5893),e=c(7294),f=c(5678),g=c(9810);function h(a){var b=a.field,c=a.emit,h=a.modelValue,i=(0,e.useState)(!1),j=i[0],k=i[1],l=(0,e.useState)([]),m=l[0],n=l[1],o=(0,e.useState)(h),p=o[0],q=o[1];return(0,f.rf)(function(){c(b.multiple?m:p)},[p,m]),(0,d.jsxs)(e.Fragment,{children:[m.length&&b.multiple?(0,d.jsxs)("div",{className:"flex items-center flex-wrap",children:[(0,d.jsx)("div",{className:"flex items-center flex-wrap",children:m.map(function(a,b){return(0,d.jsx)("div",{className:" group transition-all ",children:(0,d.jsxs)("div",{className:"aspect-w-1 relative aspect-h-1 w-[100px] h-[100px] mb-[10px] mr-[10px] bg-gray-200",children:[(0,d.jsx)("img",{src:a.path,alt:a.name,className:"w-full h-full object-cover"}),(0,d.jsx)("button",{onClick:function(){return n(m.filter(function(b){return b.id!=a.id}))},className:"absolute hidden group-hover:block bottom-1 right-1 border border-gray-900 bg-white text-gray-900 rounded-[4px] px-[10px] py-[4px] text-[10px]",children:"X\xf3a"})]})},b)})}),(0,d.jsx)("button",{onClick:function(){return k(!0)},className:"border-dashed border-2 border-gray-200 w-[100px] h-[100px] flex items-center justify-center mb-[10px] mr-[10px]",children:(0,d.jsx)("img",{src:"/svg/admin/sidebar/plus.svg",className:"text-gray-200"})})]}):"",p&&!b.multiple?(0,d.jsx)("div",{className:"",children:(0,d.jsx)("div",{className:" group transition-all ",children:(0,d.jsxs)("div",{className:"relative aspect-w-1 aspect-h-1 mb-[10px] mr-[10px] bg-gray-200 h-[250px] w-full",children:[(0,d.jsx)("img",{src:p.path,alt:p.name,className:"object-contain w-full h-full"}),(0,d.jsx)("button",{onClick:function(){return q(null)},className:"absolute hidden group-hover:block bottom-1 right-1 border border-gray-900 bg-white text-gray-900 rounded-[4px] px-[10px] py-[4px] text-[10px]",children:"X\xf3a"})]})})}):"",!m.length&&b.multiple?(0,d.jsx)("div",{className:"group",children:(0,d.jsx)("button",{onClick:function(){return k(!0)},className:"border-dashed border-2 border-gray-200 w-[100px] h-[100px] flex items-center justify-center mb-[10px] mr-[10px]",children:(0,d.jsx)("img",{src:"/svg/admin/sidebar/plus.svg",className:"text-gray-200"})})}):"",p||b.multiple?"":(0,d.jsx)("div",{className:"bg-gray-100 group p-[20px] opacity-50",children:(0,d.jsx)("div",{className:" border-dashed border-2 border-gray-700 w-full min-h-[150px] rounded-[4px] text-center p-[10px] flex items-center justify-center transition-all cursor-pointer relative",children:(0,d.jsx)("button",{className:"absolute flex items-center justify-center inset-x-0 inset-y-0 text-center uppercase",onClick:function(){return k(!0)},children:(0,d.jsx)("img",{src:"/svg/image_folder.svg",alt:""})})})}),j&&(0,d.jsx)("div",{className:"absolute p-[20px] inset-x-0 inset-y-0 bg-white z-[99] h-full w-full",children:(0,d.jsx)(g.Z,{fileSelect:p,filesSelect:m,multiple:b.multiple,onClose:function(a){return k(a)},onSelectFile:function(a){b.multiple&&n(a),b.multiple||q(a)}})})]})}var i=c(828),j=c(918),k=function(a){var b=a.modelValue,c=a.emit,g=(0,e.useRef)(),h=(0,i.Z)(e.useState(null!=b?b:""),2),k=h[0],l=h[1];return(0,f.rf)(function(){c(k)},[k]),(0,d.jsx)("div",{children:(0,d.jsx)(j.M,{apiKey:"kk8b71st8g7se8kra0do3fzsckuxv92i3y7p7onfzof65jwh",onInit:function(a,b){return g.current=b},initialValue:b,onChange:function(a){return l(a.target.getContent())},init:{height:600,menubar:!0,image_title:!0,automatic_uploads:!0,file_picker_types:"file image media",plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount","image"],toolbar:"undo redo | formatselectbold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:16px }"}})})},l=c(3621),m=function(a){var b=a.field,c=a.modelValue;a.updateModelValue;var f=(0,e.useState)(null!=c?c:[]),g=f[0],h=f[1],i=function(){var a=g?g.length:0;return(0,d.jsxs)("div",{className:"py-2 px-3",children:[(0,d.jsx)("b",{children:a})," item",a>1?"s":""," selected."]})};return(0,d.jsx)("div",{className:"flex justify-content-center",children:(0,d.jsx)(l.N,{value:g,options:b.options,onChange:function(a){return h(a.value)},optionValue:"id",optionLabel:"name",placeholder:"Select",panelFooterTemplate:i,className:"w-full md:w-20rem"})})},n=c(7568),o=c(4051),p=c.n(o),q=c(9785),r=c(1163),s=c(1202),t=function(a){var b,c,g,h=a.field,i=a.modelValue,j=a.updateModelValue,k=(0,e.useState)(null!=i?i:[]),m=k[0],o=k[1],t=(0,e.useState)([]),u=t[0],v=t[1],w={"Accept-Language":(0,r.useRouter)().locale},x=(g=(0,n.Z)(p().mark(function a(){return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(h&&h.source)){a.next=2;break}return a.abrupt("return",q.Z.get("".concat(h.source.model,"?")+h.source.query,{headers:w}).then(function(a){var b;v((b=a.data.data.data)?b.map(function(a){return{id:a.id,name:a.name}}):[])}));case 2:case"end":return a.stop()}},a)})),function(){return g.apply(this,arguments)});e.useEffect(function(){x()},[]),(0,f.rf)(function(){j(m)},[m]);var y=function(){var a=m?m.length:0;return(0,d.jsxs)("div",{className:"py-2 px-3",children:[(0,d.jsx)("b",{children:a})," item",a>1?"s":""," selected."]})};return(0,d.jsxs)("div",{className:"flex justify-content-center",children:[(null===(b=h.source)|| void 0===b?void 0:b.multiple)&&(0,d.jsx)(l.N,{value:m,options:u,onChange:function(a){o(a.value)},optionLabel:"name",optionValue:"id",placeholder:"Select",panelFooterTemplate:y,className:"w-full"}),!(null===(c=h.source)|| void 0===c?void 0:c.multiple)&&(0,d.jsx)(s.L,{value:i,onChange:function(a){return j(a.value)},options:u,optionValue:"id",optionLabel:"name",placeholder:"Thể loại",className:"w-full"})]})},u=c(1772),v=function(a){a.fieldId,a.field;var b=a.emit,c=a.modelValue;return a.disabled,(0,d.jsx)("div",{className:"flex justify-content-center",children:(0,d.jsx)(u.X,{onChange:function(a){return b(a.checked)},checked:c})})},w=c(9710);function x(a){a.fieldId;var b=a.field,c=a.emit,e=a.modelValue;return a.disabled,(0,d.jsx)("div",{className:"flex justify-content-center",children:(0,d.jsx)("div",{className:"flex flex-wrap gap-[2rem]",children:b.options.map(function(a,b){return(0,d.jsxs)("div",{className:"flex align-items-center",children:[(0,d.jsx)(w.E,{inputId:a.name,value:a.value,onChange:function(a){return c(a.value)},checked:a.value===e}),(0,d.jsx)("label",{htmlFor:a.name,className:"ml-2",children:a.name})]},b)})})})}var y=c(9815),z=c(9403),A=function(a){a.field;var b=a.modelValue,c=a.updateModelValue,g=(0,i.Z)(e.useState(b?b.filter(function(a){return a.title}):[]),2),h=g[0],j=g[1];return(0,f.rf)(function(){c(h)},[h]),(0,d.jsx)("div",{children:(0,d.jsxs)("div",{className:"space-y-[12px]",children:[h.map(function(a,b){return(0,d.jsxs)("div",{className:"flex items-center justify-between space-x-[12px]",children:[(0,d.jsx)("input",{defaultValue:a.title,onChange:function(a){h[b].title=a.target.value,j(h)},type:"text",className:"w-full input"}),(0,d.jsx)(z.z,{onClick:function(){j(h.filter(function(b){return b.title!==a.title}))},size:"small",label:"X\xf3a",severity:"danger",icon:"pi pi-trash"})]},b)}),(0,d.jsx)(z.z,{onClick:function(){j((0,y.Z)(h).concat([{title:""}]))},className:"mt-[12px]",size:"small",label:"Th\xeam mới",icon:"pi pi-plus"})]})})},B=c(6042),C=c(9396),D=c(3540),E=function(a){var b=a.field,c=a.modelValue,h=a.updateModelValue,j=function(){return c||{header:"",text_small:"",sub_text:""}},k=(0,i.Z)(e.useState({}),2),l=k[0],m=k[1],n=(0,i.Z)(e.useState(0),2),o=n[0],p=n[1],q=(0,i.Z)(e.useState(!1),2),r=q[0],s=q[1];return e.useEffect(function(){m(j)},[c]),(0,f.rf)(function(){h(l)},[l]),(0,d.jsxs)("div",{children:[r&&(0,d.jsx)("div",{className:"absolute p-[20px] inset-x-0 inset-y-0 bg-white z-[99] h-full w-full",children:(0,d.jsx)(g.Z,{fileSelect:l.file,multiple:b.multiple,onClose:function(a){return s(a)},onSelectFile:function(a){l.sections[o].file=a.path,m(l)}})}),(0,d.jsx)(D.J,{activeIndex:0,children:(0,d.jsx)(D.U,{header:"Nội dung",children:(0,d.jsxs)("div",{className:"mt-[12px]",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{children:"Text nhỏ"}),(0,d.jsx)("input",{defaultValue:l.text_small,onChange:function(a){m((0,C.Z)((0,B.Z)({},l),{text_small:a.target.value}))},type:"text",className:"input"})]}),(0,d.jsxs)("div",{className:"mt-[12px]",children:[(0,d.jsx)("label",{children:"Header"}),(0,d.jsx)("input",{defaultValue:l.header,onChange:function(a){m((0,C.Z)((0,B.Z)({},l),{header:a.target.value}))},type:"text",className:"input"})]}),(0,d.jsxs)("div",{className:"mt-[12px]",children:[(0,d.jsx)("label",{children:"Sub Text"}),(0,d.jsx)("input",{defaultValue:l.sub_text,onChange:function(a){m((0,C.Z)((0,B.Z)({},l),{sub_text:a.target.value}))},type:"text",className:"input"})]}),(0,d.jsxs)("div",{children:[l&&l.sections?l.sections.map(function(a,b){var c;return(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"space-y-[12px]",children:[(0,d.jsxs)("label",{className:"font-bold text-gray-700 text-[14px] my-[12px] block",children:["Nội dung ",b+1]}),(0,d.jsxs)("div",{className:"space-y-[12px]",children:[(0,d.jsx)("label",{children:"Ti\xeau đề"}),(0,d.jsx)("div",{children:(0,d.jsx)("input",{defaultValue:a.title,onChange:function(a){l.sections[b].title=a.target.value,m(l)},type:"text",className:"input"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{children:"Image"}),(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsx)("div",{className:"aspect-w-1 aspect-h-1 max-w-[200px] ",children:(0,d.jsx)("img",{src:null!==(c=a.file)&& void 0!==c?c:"",alt:"",className:"w-full h-full object-containt"})}),(0,d.jsx)(z.z,{onClick:function(){p(b),s(!0)},icon:"pi pi-cloud-upload",className:"mt-[12px]",size:"small",label:"Chọn h\xecnh ảnh",severity:"help"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{children:"Gi\xe1 trị"}),(0,d.jsx)("textarea",{rows:4,defaultValue:a.value,onChange:function(a){l.sections[b].value=a.target.value,m(l)},className:"input"})]})]})]}),(0,d.jsx)("div",{className:"flex justify-end",children:(0,d.jsx)(z.z,{onClick:function(){m((0,C.Z)((0,B.Z)({},l),{sections:l.sections.filter(function(a,c,d){return c!=b})}))},className:"mt-[12px]",size:"small",label:"X\xf3a",severity:"danger",icon:"pi pi-trash"})})]},b)}):"",(0,d.jsx)(z.z,{onClick:function(){l.sections||(l.sections=[]),m((0,C.Z)((0,B.Z)({},l),{sections:(0,y.Z)(l.sections).concat([{title:"",file:"",value:""}])}))},className:"mt-[12px]",size:"small",label:"Tạo Mới Section",icon:"pi pi-plus"})]})]})})})]})};function F(a){var b,c,f,g=a.field,i=a.updateModelValue,j=a.modelValue,l=(0,e.useId)();return(0,d.jsxs)(e.Fragment,{children:[(0,d.jsxs)("label",{htmlFor:g.placeholder,className:"font-bold text-gray-700 text-[14px] mb-[4px] block",children:[g.title,g.required&&(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),void 0===g.type||"text"===g.type||"password"===g.type||"number"===g.type||"email"===g.type||"datetime-local"===g.type||"date"===g.type||"time"===g.type?(0,d.jsx)("input",{id:l,value:j,onChange:function(a){return i(a.target.value)},type:g.type,className:null!==(b=g.className)&& void 0!==b?b:"input",placeholder:g.placeholder,disabled:g.disable}):"textarea"===g.type?(0,d.jsx)("textarea",{id:l,value:j,rows:null!==(c=g.rows)&& void 0!==c?c:5,onChange:function(a){return i(a.target.value)},className:null!==(f=g.className)&& void 0!==f?f:"input",placeholder:g.placeholder,disabled:g.disable}):"select_source"===g.type?(0,d.jsx)(t,{updateModelValue:function(a){return i(a)},modelValue:j,field:g}):"checkbox"===g.type?(0,d.jsx)(e.Fragment,{children:(0,d.jsx)(v,{fieldId:l,field:g,emit:function(a){return i(a)},modelValue:j})}):"radio"===g.type?(0,d.jsx)(e.Fragment,{children:(0,d.jsx)(x,{fieldId:l,field:g,emit:function(a){return i(a)},modelValue:j})}):"select"===g.type?(0,d.jsx)(m,{updateModelValue:function(a){return i(a)},modelValue:j,field:g}):"rich_text"===g.type?(0,d.jsx)(k,{emit:function(a){return i(a)},modelValue:j}):"input_file"===g.type?(0,d.jsx)(h,{field:g,modelValue:j,emit:function(a){return i(a)}}):"section_custom"===g.type?(0,d.jsx)(E,{updateModelValue:function(a){return i(a)},modelValue:j,field:g}):"list"===g.type?(0,d.jsx)(e.Fragment,{children:(0,d.jsx)(A,{updateModelValue:function(a){return i(a)},modelValue:j,field:g})}):void 0]})}var G=c(9127),H=function(a){var b=a.field,c=a.updateModelValue,f=a.modelValue,g=function(){return b.fieldName?b.errors[b.fieldName]:""},h=(0,e.useState)(!!b.validate||b.validate),i=h[0],j=h[1];(0,e.useEffect)(function(){j((0,G.O)(f,b.rules[b.fieldName]))},[f]),(0,e.useEffect)(function(){k()},[b.errors]);var k=function(){j(!b.errors.hasOwnProperty(b.fieldName))};return(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(F,{field:b,updateModelValue:c,modelValue:f}),!0!=i&& void 0!=i?(0,d.jsx)("small",{className:"text-red-400 absolute inset-x-0 bottom-[-30px] font-bold",children:Array.isArray(g)?g[0]:"".concat(b.title," kh\xf4ng hợp lệ")}):""]})}},9127:function(a,b,c){function d(a,b){var c={},d=!0,f=!1,g=void 0;try{for(var h,i=Object.entries(a)[Symbol.iterator]();!(d=(h=i.next()).done);d=!0){var j=h.value;e(j[1],b[j[0]])||(c[j[0]]="")}}catch(k){f=!0,g=k}finally{try{d||null==i.return||i.return()}finally{if(f)throw g}}return c}function e(a,b){if(void 0===b)return!0;var c=!0,d=!0,e=!1,g=void 0;try{for(var h,i=b.split("|")[Symbol.iterator]();!(d=(h=i.next()).done);d=!0){var j=h.value;if(!f(a,j)){c=!1;break}}}catch(k){e=!0,g=k}finally{try{d||null==i.return||i.return()}finally{if(e)throw g}}return c}function f(a,b){var c,d=b.split(":")[0],e=null!==(c=b.split(":")[1])&& void 0!==c?c:null;switch(d){case"array":return Array.isArray(a);case"email":return/^[\w.!?#$%&'=~|{}`+*^][\w\-.!?#$%&'=~|{}`+*^]*@((xn--)?[\w]+([-][\w]+)*\.)+[a-z]{2,}$/i.test(a);case"date":if(RegExp("([0-9]{4}[-](0[1-9]|1[0-2])[-]([0-2]{1}[0-9]{1}|3[0-1]{1})|([0-2]{1}[0-9]{1}|3[0-1]{1})[-](0[1-9]|1[0-2])[-][0-9]{4})").test(a))return!0;return!1;case"string":return"string"==typeof a;case"required":return!!a;case"phone":return/^(84|19|0[2|3|5|7|8|9])+([0-9]{6,10})\b/g.test(a);case"in":var f=e.split(",");if(Array.isArray(a))return a.every(function(a){return f.includes(a.toString())});return a&&f.includes(a.toString());case"integer":return!isNaN(a);case"min":return a.length>=parseInt(e);case"max":return a.length<=parseInt(e);default:return!0}}c.d(b,{G:function(){return d},O:function(){return e}})}}])